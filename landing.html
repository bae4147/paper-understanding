<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Paper Reading Study</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function LandingPage() {
            const [mode, setMode] = useState(null); // null: mode selection, 'experiment', 'test'
            const [participantId, setParticipantId] = useState('');
            const [hasConsented, setHasConsented] = useState(false);
            const [currentStep, setCurrentStep] = useState(0); // 0: welcome, 1: info, 2: consent, 3: start

            // Test mode specific states
            const [testCondition, setTestCondition] = useState('');
            const [testPaper, setTestPaper] = useState('');

            const handleBegin = () => {
                if (!participantId.trim()) {
                    alert('참여자 ID를 입력해주세요');
                    return;
                }

                if (mode === 'experiment' && !hasConsented) {
                    alert('동의서를 읽고 동의해주세요');
                    return;
                }

                // Navigate to pre-survey with participant ID and mode
                window.location.href = `pre-survey.html?participantId=${encodeURIComponent(participantId)}&mode=experiment`;
            };

            const handleTestBegin = () => {
                if (!participantId.trim()) {
                    alert('참여자 ID를 입력해주세요');
                    return;
                }
                if (!testCondition) {
                    alert('컨디션을 선택해주세요');
                    return;
                }
                if (!testPaper) {
                    alert('논문을 선택해주세요');
                    return;
                }

                // Navigate directly to reading phase with test parameters
                window.location.href = `reading.html?participantId=${encodeURIComponent(participantId)}&condition=${testCondition}&paper=${testPaper}&mode=test`;
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50">
                    {/* Mode Selection */}
                    {mode === null && (
                        <div className="max-w-4xl mx-auto px-6 py-12">
                            <div className="bg-white rounded-2xl shadow-2xl p-12 text-center">
                                <div className="text-6xl mb-6">🔬</div>
                                <h1 className="text-4xl font-bold text-gray-800 mb-4">
                                    실험 시스템
                                </h1>
                                <p className="text-xl text-gray-600 mb-12">
                                    모드를 선택해주세요
                                </p>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto">
                                    <button
                                        onClick={() => setMode('experiment')}
                                        className="p-8 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 hover:border-blue-400 transition-all"
                                    >
                                        <div className="text-4xl mb-4">👥</div>
                                        <h3 className="text-2xl font-bold text-gray-800 mb-2">실험 모드</h3>
                                        <p className="text-gray-600">참가자용 정식 실험</p>
                                    </button>

                                    <button
                                        onClick={() => setMode('test')}
                                        className="p-8 bg-purple-50 border-2 border-purple-200 rounded-xl hover:bg-purple-100 hover:border-purple-400 transition-all"
                                    >
                                        <div className="text-4xl mb-4">⚙️</div>
                                        <h3 className="text-2xl font-bold text-gray-800 mb-2">테스트 모드</h3>
                                        <p className="text-gray-600">연구자용 테스트</p>
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Progress bar - only show in experiment mode */}
                    {mode === 'experiment' && (
                    <div className="bg-white shadow-sm">
                        <div className="max-w-4xl mx-auto px-6 py-3">
                            <div className="flex items-center justify-between text-sm">
                                <div className={`flex-1 text-center ${currentStep >= 0 ? 'text-blue-600 font-semibold' : 'text-gray-400'}`}>
                                    환영합니다
                                </div>
                                <div className="w-12 h-1 bg-gray-300 mx-2">
                                    <div className={`h-full bg-blue-600 transition-all ${currentStep >= 1 ? 'w-full' : 'w-0'}`}></div>
                                </div>
                                <div className={`flex-1 text-center ${currentStep >= 1 ? 'text-blue-600 font-semibold' : 'text-gray-400'}`}>
                                    연구 정보
                                </div>
                                <div className="w-12 h-1 bg-gray-300 mx-2">
                                    <div className={`h-full bg-blue-600 transition-all ${currentStep >= 2 ? 'w-full' : 'w-0'}`}></div>
                                </div>
                                <div className={`flex-1 text-center ${currentStep >= 2 ? 'text-blue-600 font-semibold' : 'text-gray-400'}`}>
                                    동의서
                                </div>
                                <div className="w-12 h-1 bg-gray-300 mx-2">
                                    <div className={`h-full bg-blue-600 transition-all ${currentStep >= 3 ? 'w-full' : 'w-0'}`}></div>
                                </div>
                                <div className={`flex-1 text-center ${currentStep >= 3 ? 'text-blue-600 font-semibold' : 'text-gray-400'}`}>
                                    시작
                                </div>
                            </div>
                        </div>
                    </div>
                    )}

                    {/* Experiment Mode Flow */}
                    {mode === 'experiment' && (
                    <div className="max-w-4xl mx-auto px-6 py-12">
                        {/* Step 0: Welcome */}
                        {currentStep === 0 && (
                            <div className="bg-white rounded-2xl shadow-2xl p-12 text-center">
                                <div className="text-6xl mb-6">📚</div>
                                <h1 className="text-4xl font-bold text-gray-800 mb-4">
                                    학술 논문 읽기 실험에 오신 것을 환영합니다
                                </h1>
                                <p className="text-xl text-gray-600 mb-8">
                                    참여해주셔서 감사합니다 :)
                                </p>
                                
                                <div className="bg-blue-50 border-l-4 border-blue-500 p-6 mb-8 text-left">
                                    <h3 className="font-bold text-lg mb-3">실험 진행:</h3>
                                    <ul className="space-y-2 text-gray-700">
                                        <li>✓ <strong>예상 소요시간:</strong> 약 2시간</li>
                                        <li>✓ <strong>세션 구성:</strong> 2회 진행 (AI 지원 O / AI 지원 X, 순서는 무작위 배정)</li>
                                        <li>✓ <strong>각 세션:</strong> 논문 읽기(30분) → 퀴즈(15분) → 리뷰작성(20분)</li>
                                    </ul>
                                </div>

                                <button
                                    onClick={() => setCurrentStep(1)}
                                    className="px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-lg font-medium transition-colors"
                                >
                                    계속하기 →
                                </button>
                            </div>
                        )}

                        {/* Step 1: Study Information */}
                        {currentStep === 1 && (
                            <div className="bg-white rounded-2xl shadow-2xl p-10">
                                <h2 className="text-3xl font-bold text-gray-800 mb-6">실험 정보</h2>
                                
                                <div className="space-y-6 text-gray-700">
                                    <div>
                                        <h3 className="text-xl font-semibold mb-3">목적</h3>
                                        <p>
                                            본 연구는 연구자들이 LLM 기반 AI 어시스턴트를 활용하는 것이 논문을 읽는 패턴과 논문에 대한 이해도에 미치는 영향을 탐색하는 것을 목표로 합니다.
                                        </p>
                                    </div>

                                    <div>
                                        <h3 className="text-xl font-semibold mb-3">절차</h3>
                                        <ol className="list-decimal list-inside space-y-2 ml-4">
                                            <li><strong>사전 설문</strong> (5분): 연구 및 LLM 사용 경험에 관한 설문</li>
                                            <li><strong>1차 세션</strong> (65분): 논문 읽기 → 퀴즈 → 리뷰 작성</li>
                                            <li><strong>2차 세션</strong> (65분): 논문 읽기 → 퀴즈 → 리뷰 작성 (다른 조건)</li>
                                            <li><strong>사후 설문</strong> (10분): 경험 및 피드백 설문지</li>
                                        </ol>
                                        <p className="mt-3 text-sm text-gray-600">
                                            * 두 세션의 AI 지원 유무 순서는 무작위로 배정됩니다.
                                        </p>
                                    </div>

                                    <div>
                                        <h3 className="text-xl font-semibold mb-3">데이터 수집</h3>
                                        <p>
                                            읽기 패턴(스크롤 이벤트, 소요 시간), AI 상호작용 로그(해당되는 경우), 퀴즈 응답, 작성된 리뷰를 포함한 행동 데이터를 수집합니다.
                                            모든 데이터는 익명화되며 연구 목적으로만 사용됩니다.
                                        </p>
                                    </div>

                                    <div>
                                        <h3 className="text-xl font-semibold mb-3">위험성 및 이점</h3>
                                        <p>
                                            <strong>위험성:</strong> 최소한입니다. 읽기로 인한 경미한 눈의 피로나 피곤함을 경험할 수 있습니다.<br/>
                                            <strong>이점:</strong> 학술 논문 분석 경험을 얻고 AI 지원 학습에 대한 연구에 기여하게 됩니다.
                                        </p>
                                    </div>

                                    <div>
                                        <h3 className="text-xl font-semibold mb-3">자발적 참여</h3>
                                        <p>
                                            귀하의 참여는 완전히 자발적입니다. 언제든지 불이익 없이 참여를 철회할 수 있습니다.
                                        </p>
                                    </div>
                                </div>

                                <div className="flex space-x-4 mt-8">
                                    <button
                                        onClick={() => setCurrentStep(0)}
                                        className="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium transition-colors"
                                    >
                                        ← 이전
                                    </button>
                                    <button
                                        onClick={() => setCurrentStep(2)}
                                        className="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors"
                                    >
                                        계속하기 →
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Step 2: Consent Form */}
                        {currentStep === 2 && (
                            <div className="bg-white rounded-2xl shadow-2xl p-10">
                                <h2 className="text-3xl font-bold text-gray-800 mb-6">연구 참여 동의서</h2>
                                
                                <div className="bg-gray-50 border border-gray-300 rounded-lg p-6 max-h-96 overflow-y-auto mb-6">
                                    <div className="space-y-4 text-sm text-gray-700">
                                        <p className="font-semibold">연구 참여 동의서</p>

                                        <p>
                                            <strong>연구 제목:</strong> 대규모 언어 모델이 학술 논문 읽기 이해도에 미치는 영향에 대한 이해
                                        </p>

                                        <p>
                                            <strong>연구 책임자:</strong> 서봉원 <br/>
                                            <strong>소속 기관:</strong> 서울대학교<br/>
                                            <strong>연락처:</strong> bongwonsuh@snu.ac.kr
                                        </p>

                                        <div>
                                            <p className="font-semibold mb-2">귀하는 연구 참여를 요청받고 있습니다.</p>
                                            <p>
                                                동의하기 전에, 연구자가 본 정보 문서를 통해 연구에 대해 설명할 것입니다.
                                                이해되지 않는 부분이 있다면 자유롭게 질문하시기 바랍니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">연구 목적</p>
                                            <p>
                                                본 연구의 목적은 AI 언어 모델이 연구자들의 학술 논문 이해 및 비판적 평가 능력에 어떤 영향을 미치는지 조사하는 것입니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">연구 절차</p>
                                            <p>
                                                참여에 동의하시면, 다음을 수행하도록 요청받게 됩니다:
                                            </p>
                                            <ul className="list-disc list-inside ml-4 mt-2 space-y-1">
                                                <li>배경 및 경험에 관한 사전 설문지 작성</li>
                                                <li>학술 논문 읽기 (AI 지원 유무는 무작위 배정됨)</li>
                                                <li>논문에 관한 이해도 퀴즈 완료</li>
                                                <li>논문에 대한 구조화된 피어 리뷰 작성</li>
                                                <li>경험에 관한 사후 설문지 작성</li>
                                            </ul>
                                            <p className="mt-2">
                                                전체 연구는 약 90분이 소요됩니다. 읽기 패턴, AI 상호작용(해당되는 경우), 응답이 자동으로 기록됩니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">위험 및 불편함</p>
                                            <p>
                                                본 연구와 관련된 위험은 최소한입니다. 장시간 읽기로 인해 경미한 눈의 피로나 정신적 피로를 경험할 수 있습니다.
                                                필요시 휴식을 취할 수 있습니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">이점</p>
                                            <p>
                                                본 연구 참여로 인한 직접적인 이점은 없을 수 있습니다.
                                                그러나 귀하의 참여는 AI 도구가 학술 연구 활동을 더 잘 지원하도록 설계되는 방법을 이해하는 데 기여하게 됩니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">기밀 유지</p>
                                            <p>
                                                본 연구에 대한 귀하의 참여는 기밀로 유지됩니다. 모든 데이터는 안전하게 저장되며 연구팀만 접근할 수 있습니다.
                                                귀하의 이름 대신 참여자 ID가 사용되며, 발표되는 결과에서 귀하를 개인적으로 식별할 수 없습니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">자발적 참여</p>
                                            <p>
                                                본 연구에 대한 귀하의 참여는 완전히 자발적입니다. 언제든지 불이익 없이 참여를 거부하거나
                                                철회할 수 있습니다. 철회하는 경우, 별도로 명시하지 않는 한 귀하의 데이터는 삭제됩니다.
                                            </p>
                                        </div>

                                        <div>
                                            <p className="font-semibold mb-2">문의사항</p>
                                            <p>
                                                본 연구에 대해 질문이 있으시면 다음으로 연락하시기 바랍니다:<br/>
                                                [배승현] - [sh.bae@snu.ac.kr]
                                            </p>
                                        </div>

                                        <div className="border-t border-gray-300 pt-4 mt-6">
                                            <p className="font-semibold mb-2">동의 진술</p>
                                            <p>
                                                아래 체크박스를 선택하고 "동의합니다"를 클릭함으로써, 귀하는 다음을 확인합니다:
                                            </p>
                                            <ul className="list-disc list-inside ml-4 mt-2 space-y-1">
                                                <li>위의 정보를 읽고 이해했습니다</li>
                                                <li>본 연구에 자발적으로 참여하는 데 동의합니다</li>
                                                <li>만 18세 이상입니다</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                                    <label className="flex items-start space-x-3 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={hasConsented}
                                            onChange={(e) => setHasConsented(e.target.checked)}
                                            className="w-5 h-5 mt-1 flex-shrink-0"
                                        />
                                        <span className="text-sm">
                                            <strong>동의서를 읽었으며 본 연구에 참여하는 데 동의합니다.</strong>
                                            {' '}제 참여가 자발적이며 언제든지 철회할 수 있음을 이해합니다.
                                        </span>
                                    </label>
                                </div>

                                <div className="flex space-x-4">
                                    <button
                                        onClick={() => setCurrentStep(1)}
                                        className="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium transition-colors"
                                    >
                                        ← 이전
                                    </button>
                                    <button
                                        onClick={() => setCurrentStep(3)}
                                        disabled={!hasConsented}
                                        className="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors"
                                    >
                                        계속하기 →
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Step 3: Participant ID Entry */}
                        {currentStep === 3 && (
                            <div className="bg-white rounded-2xl shadow-2xl p-12 text-center">
                                <div className="text-5xl mb-6">✅</div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-4">시작 준비 완료!</h2>
                                <p className="text-gray-600 mb-8">
                                    계속하려면 참여자 ID를 입력하세요.
                                </p>

                                <div className="max-w-md mx-auto mb-8">
                                    <label className="block text-left text-sm font-medium text-gray-700 mb-2">
                                        참여자 ID *
                                    </label>
                                    <input
                                        type="text"
                                        value={participantId}
                                        onChange={(e) => setParticipantId(e.target.value)}
                                        placeholder="예: P001"
                                        className="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                        autoFocus
                                    />
                                    <p className="text-sm text-gray-500 mt-2">
                                        이 ID는 연구자가 제공합니다.
                                    </p>
                                </div>

                                <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-8 text-left max-w-md mx-auto">
                                    <p className="text-sm text-gray-700">
                                        <strong>중요:</strong> 다음 사항을 확인하세요:
                                    </p>
                                    <ul className="list-disc list-inside ml-4 mt-2 text-sm text-gray-700 space-y-1">
                                        <li>안정적인 인터넷 연결</li>
                                        <li>약 90분의 중단 없는 시간</li>
                                        <li>집중해서 읽을 수 있는 조용한 환경</li>
                                    </ul>
                                </div>

                                <div className="flex space-x-4 max-w-md mx-auto">
                                    <button
                                        onClick={() => setCurrentStep(2)}
                                        className="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium transition-colors"
                                    >
                                        ← 이전
                                    </button>
                                    <button
                                        onClick={handleBegin}
                                        disabled={!participantId.trim()}
                                        className="flex-1 px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium text-lg transition-colors"
                                    >
                                        실험 시작 →
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                    )}

                    {/* Test Mode Flow */}
                    {mode === 'test' && (
                        <div className="max-w-4xl mx-auto px-6 py-12">
                            <div className="bg-white rounded-2xl shadow-2xl p-12">
                                <div className="text-5xl mb-6 text-center">⚙️</div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-4 text-center">테스트 모드</h2>
                                <p className="text-gray-600 mb-8 text-center">
                                    연구자용 테스트 설정
                                </p>

                                <div className="max-w-md mx-auto space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            참여자 ID *
                                        </label>
                                        <input
                                            type="text"
                                            value={participantId}
                                            onChange={(e) => setParticipantId(e.target.value)}
                                            placeholder="예: TEST001"
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            컨디션 *
                                        </label>
                                        <select
                                            value={testCondition}
                                            onChange={(e) => setTestCondition(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                                        >
                                            <option value="">선택하세요</option>
                                            <option value="with-ai">AI 지원 O</option>
                                            <option value="without-ai">AI 지원 X</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            논문 선택 *
                                        </label>
                                        <select
                                            value={testPaper}
                                            onChange={(e) => setTestPaper(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                                        >
                                            <option value="">선택하세요</option>
                                            <option value="paper1">논문 1</option>
                                            <option value="paper2">논문 2</option>
                                        </select>
                                    </div>
                                </div>

                                <div className="flex space-x-4 max-w-md mx-auto mt-8">
                                    <button
                                        onClick={() => setMode(null)}
                                        className="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium transition-colors"
                                    >
                                        ← 뒤로
                                    </button>
                                    <button
                                        onClick={handleTestBegin}
                                        className="flex-1 px-8 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium text-lg transition-colors"
                                    >
                                        테스트 시작 →
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <div className="max-w-4xl mx-auto px-6 pb-8 text-center text-sm text-gray-500">
                        <p>서울대학교 | 데이터사이언스 대학원</p>
                        <p className="mt-2">문의사항이 있으시면 연락주세요: sh.bae@snu.ac.kr</p>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<LandingPage />, document.getElementById('root'));
    </script>
</body>
</html>